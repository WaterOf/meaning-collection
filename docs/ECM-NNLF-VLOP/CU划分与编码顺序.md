#### **(1) 划分与编码顺序的关系**
在H.265/HEVC和H.266/VVC中，CU的编码顺序由 **四叉树（QT）/二叉树（BT）/三叉树（TT）划分结构** 决定，具体规则如下：

| 顺序类型         | 描述                                                                 | 示例（QT划分）                     |
|------------------|----------------------------------------------------------------------|------------------------------------|
| **划分顺序**      | 递归划分时优先处理当前节点的子节点                                   | 父CU → 子CU0 → 子CU1 → ... → 子CU3 |
| **编码顺序**      | 实际编码数据写入码流的顺序，按 **深度优先+光栅扫描** 组合确定         | 子CU0 → 子CU1 → 子CU2 → 子CU3      |

#### **(2) 具体流程（以QT为例）**
```text
         [64x64] (Depth 0)
          / | | \ 
[32x32]0  1 2  3 [32x32] (Depth 1)
       /|\ 
[16x16]0 1 2... (Depth 2)
```
- **划分顺序**：深度优先遍历
  1. 先划分64x64为4个32x32（Depth 1）
  2. 对第一个32x32继续划分到16x16（Depth 2）
- **编码顺序**：光栅扫描顺序（Z字形）
  1. 编码Depth 2的16x16（左上子CU）
  2. 同Depth的后续子CU（按坐标顺序）
  3. 回溯到Depth 1的未处理CU

#### **(3) 关键标准引用**
- **HEVC标准（ITU-T H.265 6.3.1节）**：明确要求CU按 **Z扫描顺序** 处理。
- **VVC扩展**：支持更灵活的划分（BT/TT），但编码顺序仍保持深度优先。
